# 실험 결과 시각화 비교 (Comparison 0-4)

## 성능 추이 그래프 (표로 정리)

### LogAnomaly 성능 추이

```
📊 정확도 (Accuracy) 추이
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Comparison 0: ████████████████████████████ 89.80%
Comparison 1: ███████████████████████████  88.02%
Comparison 2: ██████████████████████████   87.71%
Comparison 3: ██████████████████████████   87.71%
Comparison 4: ███████████████████████████  88.35%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 재현율 (Recall) 추이
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Comparison 0: █ 3.13%
Comparison 1: ███ 6.28%
Comparison 2: ███ 6.75%
Comparison 3: ███ 6.75%
Comparison 4: ██ 5.28%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 F1 점수 추이
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Comparison 0: ██ 0.0413
Comparison 1: ████ 0.0702
Comparison 2: ████ 0.0733 (최고)
Comparison 3: ████ 0.0733 (최고)
Comparison 4: ███ 0.0613
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 종합 점수 추이
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Comparison 0: ████████ 0.2983
Comparison 1: █████████ 0.3126
Comparison 2: █████████ 0.3140 (최고)
Comparison 3: █████████ 0.3140 (최고)
Comparison 4: ████████ 0.3074
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 모델별 비교 (Comparison 4 기준)

```
📊 정확도 (Accuracy)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DeepLog:     ███ 7.20%
LogAnomaly:  ███████████████████████████████ 88.35%
LogRobust:   (제외 - OOM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 정밀도 (Precision)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DeepLog:     ███ 7.20%
LogAnomaly:  ███ 7.29%
LogRobust:   (제외 - OOM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 재현율 (Recall)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DeepLog:     ███████████████████████████████████████ 99.97%
LogAnomaly:  ██ 5.28%
LogRobust:   (제외 - OOM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 F1 점수
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DeepLog:     ██████ 13.43%
LogAnomaly:  ███ 6.13%
LogRobust:   (제외 - OOM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 특이도 (Specificity)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DeepLog:     0.00%
LogAnomaly:  ██████████████████████████████████ 94.80%
LogRobust:   (제외 - OOM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 혼동 행렬 비교

### LogAnomaly (Comparison 4)
```
              예측 정상   예측 이상
실제 정상     43,986      2,415
실제 이상      3,409        190

✅ 장점:
  - TN (43,986): 정상을 정상으로 정확히 판별
  - 특이도 94.80%: 정상 로그의 94.8% 정확 판별

⚠️ 약점:
  - FN (3,409): 이상의 94.7%를 놓침
  - 재현율 5.28%: 이상 탐지율 낮음
```

### DeepLog (Comparison 4)
```
              예측 정상   예측 이상
실제 정상          0     46,401
실제 이상          1      3,598

❌ 문제:
  - TN (0): 정상을 하나도 정상으로 판별 못함
  - FP (46,401): 모든 정상을 이상으로 오판
  - 특이도 0%: 실용성 전무
```

## 오탐지 비교

```
오탐지 수 (False Positives):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

DeepLog:     ████████████████████████████████ 46,401개
LogAnomaly:  █ 2,415개 (19배 적음)

오탐지율 (FP / 전체 정상):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

DeepLog:     ████████████████████████████████ 100.0%
LogAnomaly:  ██ 5.2%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 실험별 주요 차이점

### Comparison 0 vs 1
```
변경 사항:
  - 데이터: 20,000 → 50,000 (2.5배)

영향:
  - LogAnomaly 재현율: 3.13% → 6.28% (2배 향상)
  - LogAnomaly 종합 점수: 0.2983 → 0.3126 (4.8% 향상)

결론: 데이터 증가로 성능 향상 확인
```

### Comparison 1 vs 2 vs 3
```
변경 사항:
  - Comparison 2: 동일 설정 재실행 (재현성 검증)
  - Comparison 3: Epochs 5 → 30, LogRobust 추가

영향:
  - LogAnomaly 성능 안정화 (0.3126 → 0.3140)
  - LogRobust 학습 실패 (F1: 0.0000)
  - Epochs 증가 효과 미미

결론: LogAnomaly는 통계 기반이라 Epochs 증가 불필요
```

### Comparison 3 vs 4
```
변경 사항:
  - 데이터: 50,000 → 300,000 (6배)
  - 시퀀스 길이: 10 → 15 (50% 증가)
  - Batch Size: 64 → 32 (OOM 방지)
  - LogRobust 제외

영향:
  - LogAnomaly 정확도 향상: 87.71% → 88.35%
  - 재현율 약간 하락: 6.75% → 5.28%
  - F1 점수 하락: 0.0733 → 0.0613

결론: 
  - 더 많은 데이터 = 난이도 상승
  - 시퀀스 길이 15가 최적은 아님
  - 50K 데이터가 최적 균형점
```

---

## 각 Comparison의 목적과 결과

### Comparison 0: 프로토타입 검증 ✅
- **목적**: 빠른 검증
- **결과**: LogAnomaly > DeepLog 확인
- **결론**: LogAnomaly 유망

### Comparison 1: 데이터 증가 효과 ✅
- **목적**: 더 많은 데이터로 성능 향상 확인
- **결과**: 재현율 2배 향상
- **결론**: 데이터 증가 효과 확인

### Comparison 2: 재현성 검증 ✅
- **목적**: 성능 안정성 확인
- **결과**: 일관된 성능 유지
- **결론**: 재현 가능한 결과

### Comparison 3: 3개 모델 비교 ⚠️
- **목적**: LogRobust 추가 비교
- **결과**: LogRobust 학습 실패
- **결론**: LogRobust는 현재 구현으로 사용 불가

### Comparison 4: 최적화 시도 ⚠️
- **목적**: 시퀀스 길이 증가 + 대규모 데이터
- **결과**: 성능 약간 하락
- **결론**: Comparison 2가 최적 설정

---

## 최종 선정: LogAnomaly

### 선정 근거 요약

1. **일관된 1위**: 5번의 모든 실험에서 종합 점수 1위
2. **실용성**: 오탐지율 5.2% (운영 환경 적용 가능)
3. **안정성**: 재현 가능한 성능
4. **효율성**: 빠른 학습 속도 (3-5분)
5. **해석 가능성**: 템플릿 기반으로 이해 가능

### 최적 설정

```python
# Comparison 2/3 설정이 최적
데이터: 50,000개
시퀀스 길이: 10
Window Size: 15 (LogAnomaly)
Epochs: 5 (통계 기반이라 불필요)
Batch Size: 128

성능:
  - 정확도: 87.71%
  - 특이도: 93.99%
  - F1 점수: 0.0733
  - 종합 점수: 0.3140
```

---

## 실무 운영 시나리오

### 1일 로그 처리 예시 (1M 로그 가정)

```
전체 로그: 1,000,000개
정상 로그: 927,000개 (92.7%)
에러 로그: 73,000개 (7.3%)

LogAnomaly 탐지 결과 (추정):
  - 탐지된 이상 시퀀스: 약 50,000개
  - 오탐지: 약 48,000개 (5.2%)
  - 실제 이상 탐지: 약 3,850개 (5.28% 재현율)
  - 놓친 이상: 약 69,150개 (94.72%)

위험도 분석 (추정):
  - CRITICAL: 약 100개
  - HIGH: 약 500개
  - MEDIUM: 약 1,000개
  - LOW: 약 10,000개
  - INFO: 약 38,400개

실무 대응:
  1. CRITICAL/HIGH (600개) → 즉시 알림
  2. MEDIUM (1,000개) → 일일 리포트
  3. LOW/INFO (48,400개) → 주간 리포트
```

---

## 개선 로드맵

### Phase 1: 즉시 적용 (현재)
- ✅ LogAnomaly 기본 모델
- ✅ 위험도 분석 추가
- ✅ CRITICAL/HIGH 우선 처리

### Phase 2: 단기 개선 (1-2주)
- 임계값 최적화 (`--optimize-threshold`)
- 더 많은 학습 데이터 (1M)
- 라벨링 품질 개선

### Phase 3: 중기 개선 (1-2개월)
- Isolation Forest 추가 구현
- 앙상블 (LogAnomaly + Isolation Forest)
- 실시간 탐지 파이프라인

### Phase 4: 장기 개선 (3-6개월)
- GPU 환경에서 DeepLog 재학습
- LogRobust 개선 (라벨 추가)
- 온라인 학습 (Online Learning)

---

## 비교 요약 테이블

| Comparison | 데이터 | 시퀀스 | Epochs | 모델 | LogAnomaly 종합 | 특징 |
|------------|--------|--------|--------|------|----------------|------|
| 0 | 20K | 10 | 5 | 2 | 0.2983 | 초기 테스트 |
| 1 | 50K | 10 | 5 | 2 | 0.3126 | 데이터 증가 |
| 2 | 50K | 10 | 5 | 2 | **0.3140** | **최적 설정** |
| 3 | 50K | 10 | 30 | 3 | **0.3140** | 3개 모델 비교 |
| 4 | 300K | 15 | 30 | 2 | 0.3074 | 대규모 데이터 |

**최적 설정**: Comparison 2/3 (50K 데이터, 시퀀스 10, Epochs 5)

---

## 결론

### LogAnomaly 선정 이유 (3줄 요약)

1. **실용성**: 오탐지율 5.2% (DeepLog 100%, LogRobust 0%)
2. **안정성**: 5번의 실험에서 일관되게 최고 성능
3. **효율성**: 빠른 학습, 낮은 메모리, 해석 가능

### 다음 단계

1. LogAnomaly로 실무 이상 탐지 시스템 구축
2. 위험도 분석으로 우선순위 결정
3. CRITICAL/HIGH 위험만 알림 → 오탐지 부담 감소
4. 피드백 수집 후 임계값 최적화

